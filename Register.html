<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="css/login.css">
</head>
<body>
    <!-- <h1>Register</h1><br> -->
  <div class="loginbox">
    <img src="Images/ava.jpg" class="avatar" alt="Image error">
    <h1>Register Here</h1><br>
    <form onsubmit="register()">
<label for="email">Email*</label><br>
<input placeholder="Email Address" type="email" id="email"required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="email must end with @gmail.com"> <br>
<label for="password">Password*</label><br>
<input placeholder="Password" type="password" id="password"required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
title="Must contain at least one  number and one uppercase and lowercase letter, and at least 8 or more characters" > <br>
<label for="confirmpassword">Confirmpassword*</label><br>
<input placeholder="Confirm Password" type="password" id="confirmpassword"required> <br>

<button type="submit">Register</button>
<p class="backlink">Already have an account?  <a href="login.html">Login</a></p>
</div>
  </form>
</div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/service.js"></script>
<script>

function register() {
  event.preventDefault();
  const email = document.querySelector("#email").value;
  const password = document.querySelector("#password").value;
  const confirmpassword = document.querySelector("#confirmpassword").value;


  if (email == "" || email == null || email.trim() == "") {
                alert("invalid name");
            }
            if (password.length < 8) {
                alert("Password must be alteast 8 Character");
            }
            else 
                if (password != confirmpassword) {
                    alert("Password does not match");
                }  
                else {
                     // backend
                     let registerObj = {

                        "email": email,
                        "password": password,
                        "confirmpassword": confirmpassword
                          };

                    console.log(registerObj); //for printing in console 

              userService. register(registerObj).then(res => 
              {
                        let data=res.data;
                        console.log(data);//printing in console // for user purpose
                        alert("Registration is Successful");
                        window.location.href = "Login.html";
                    }).catch(err => {
                        console.error(err.response.data);
                        alert("Unable to register");
                    });

                }
              }
                
</script> 
</body>

</html>