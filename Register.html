<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Register</title>
</head>
<body>
    
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
</head>
<body>
  <header id="head"></header>
  <h1>Register</h1><br></div>
  <div class="form">
      <form method="post" target="blank" onSubmit="register()"> 
      <div id="name">
             
      <label for="email">Email*</label><br>
      <input type="email" name="email" id="email" required> <br>

      <label for="password">Password*</label><br>
      <input type="password" name="password" id="password" required><br>

      <label for="confirmpassword">Confirm Password* </label><br>
      <input type="password" name="confirmpassword" id="confirmpassword" required><br>


      <button type="submit">Submit</button>
      
      <button class="btn"><a href="index.html">Back</a></button>
  </form>
</div>
</div>
<script src="js/jquery.min.js"></script>
<script>
$("#head").load("head.html");
function register() {
  event.preventDefault();

  const email = document.querySelector("#email").value;
  const password = document.querySelector("#password").value;
  const confirmpassword = document.querySelector("#confirmpassword").value;


  if (email == "" || email == null || email.trim() == "") {
                alert("invalid name");
            }
            if (password.length < 8) {
                alert("Password must be alteast 8 Character");
            }
            else 
                if (password != confirmpassword) {
                    alert("Password does not match");
                }  
                else {
                     // backend
                     let registerObj = {
                        "email": email,
                        "password": password,
                        "confirmpassword": confirmpassword
                          };

                    console.log(registerObj); //for printing in console 

              const dbusername = "apikey-v2-zyhv5j7i61imeby1qya0ma2ejrc0fkf9n4e4bl3w5gn";//registration url
              const dbpassword="ec6094ae0714dc7a5ffc50a86924bef3";
              const basicAuth=" Basic "+btoa(dbusername+":"+dbpassword);
              const url="https://fffdcced-9a09-44ae-aa2f-e27add7efeb7-bluemix.cloudantnosqldb.appdomain.cloud/bankingapp_user"
              axios.post(url, registerObj,{ headers: {'Authorization':basicAuth}}).then(res => {

                        console.log(res);//printing in console // for user purpose
                        alert("Registration is Successful");
                        window.location.href = "Login.html";
                    }).catch(err => {
                        console.error(err.response);
                        alert("Unable to register");
                    });

                }
              }
                
</script> 
</body>

</html>